# 悲观锁（写操作场景）
先获取锁，再操作

# 乐观锁（读操作场景）
先操作，再判断锁情况

## 版本号机制
1. 读取数据（版本号）
2. 操作
3. 更新数据（比较版本号）

## CAS
CAS是依赖于操作系统底层的原子操作，它会对指定值进行比较&替换：`cas(key, oldValue, newValue)`
- 如果`key`对应的值等于`oldValue`，会将该值更新为`newValue`，并返回`true`。
- 如果`key`对应的值不等于`oldValue`，则返回`false`。

CAS操作失败后，该线程可以再次尝试（自旋），也可以放弃操作，取决于具体实现。

CAS存在`ABA`问题：在获取`oldValue`到`cas()`执行的时间范围内，`value`可能被多次修改，但最终值和初始值相等。解决办法是`value`中添加版本号或时间戳信息。