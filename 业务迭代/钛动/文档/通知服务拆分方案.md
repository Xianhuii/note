# 1 整体步骤
1. 拆分通知服务业务代码，部署上线
	1. cat
	2. flume
2. 为通知服务申请域名
3. 修改通知请求的域名配置，进行验证。验证无误后将所有通知请求切换到通知服务
4. 移除竞价服务中通知相关代码
# 2 通知请求配置
## 1 普通通知请求（需要改成通知服务域名）

| url                            | key                                   | value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------------ | ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| /win                           | pac.notice.win-url                    | https://brainx-dsp-sg.tec-do.cn/win?bid_id={BID_ID}&campaign_id={CAMPAIGN_ID}&ad_group_id={AD_GROUP_ID}&ad_id={AD_ID}&creative_id={CREATIVE_ID}&affiliate_id={AFFILIATE_ID}&bundle={BUNDLE}&publish_id={PUBLISH_ID}&os={OS}&tag_id={TAG_ID}                                                                                                                                                                                                                                                                                                                        |
| /imp                           | pac.notice.imp-url                    | https://brainx-dsp-sg.tec-do.cn/imp?bid_id={BID_ID}&campaign_id={CAMPAIGN_ID}&ad_group_id={AD_GROUP_ID}&ad_id={AD_ID}&creative_id={CREATIVE_ID}&device_id={DEVICE_ID}&affiliate_id={AFFILIATE_ID}&id_key={ID_KEY}&bundle={BUNDLE}&first_ssp={FIRST_SSP}&publish_id={PUBLISH_ID}&os={OS}&tag_id={TAG_ID}&ip={IP}                                                                                                                                                                                                                                                    |
| /click                         | pac.notice.click-url                  | https://brainx-dsp-sg.tec-do.cn/click?bid_id={BID_ID}&campaign_id={CAMPAIGN_ID}&ad_group_id={AD_GROUP_ID}&ad_id={AD_ID}&creative_id={CREATIVE_ID}&device_id={DEVICE_ID}&affiliate_id={AFFILIATE_ID}&id_key={ID_KEY}&bundle={BUNDLE}                                                                                                                                                                                                                                                                                                                                |
| /imp-info                      | pac.notice.imp-info-url               | https://brainx-dsp-sg.tec-do.cn/imp-info?bid_id={BID_ID}&sign={SIGN}&campaign_id={CAMPAIGN_ID}&creative_id={CREATIVE_ID}&device_id={DEVICE_ID}&affiliate_id={AFFILIATE_ID}                                                                                                                                                                                                                                                                                                                                                                                         |
| /loss                          | pac.notice.loss-url                   | https://brainx-dsp-sg.tec-do.cn/loss?bid_id={BID_ID}&sign={SIGN}&campaign_id={CAMPAIGN_ID}&ad_group_id={AD_GROUP_ID}&ad_id={AD_ID}&creative_id={CREATIVE_ID}&affiliate_id={AFFILIATE_ID}                                                                                                                                                                                                                                                                                                                                                                           |
| /f                             | pac.force.judge-url                   | https://brainx-dsp-sg.tec-do.cn/f?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&country={COUNTRY}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}&id_key={ID_KEY}                                                                                                                                                                                                                                                                                                                                                            |
| /collect/feature               | pac.force.collect-feature-url         | https://brainx-dsp-sg.tec-do.cn/collect/feature?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                                                                                                                                                                                                                                                                                                                |
| /collect/code                  | pac.force.collect-code-url            | https://brainx-dsp-sg.tec-do.cn/collect/code?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                                                                                                                                                                                                                                                                                                                   |
| /collect/error                 | pac.force.collect-error-url           | https://brainx-dsp-sg.tec-do.cn/collect/error?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                                                                                                                                                                                                                                                                                                                  |
| /collect/debug                 | pac.force.collect-debug-url           | https://brainx-dsp-sg.tec-do.cn/collect/debug?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                                                                                                                                                                                                                                                                                                                  |
| /check/count                   | pac.response.pixalate.check-count-url | https://brainx-dsp-sg.tec-do.cn/check/count?clid=tdo&paid=tdo&avid={ADV_ID}&caid={CAMPAIGN_ID}&siteId={AFFILIATE_ID}_{PUBLISH_ID}&publisherId={PUBLISH_ID}&plid={CREATIVE_ID}&priceBid={BID_PRICE}&kv3={USER_ID}&kv7={AFFILIATE_ID}&kv1={CREATIVE_SIZE}&kv2={SITE_PAGE}&kv4={IP}&kv10={MCCMNC}&kv15={COUNTRY}&kv16={LAT}&kv17={LON}&kv18={BUNDLE}&kv19={DEVICE_ID}&kv25={APP_NAME}&kv28={DEVICE_MAKE}_{DEVICE_MODEL}&kv26={OS}&kv23={CARRIER}&kv11={BID_ID}&kv27={UA}&kv55={SUPPLY_CHAIN}&kv71={COPPA}&kv62={APP_VERSION}&kv64={AFFILIATE_TYPE}&kv24={AD_FORMAT_2} |
| /loss                          | pac.notice.loss.video.url             | https://brainx-dsp-sg.tec-do.cn/loss?bid_id={BID_ID}&campaign_id={CAMPAIGN_ID}&ad_group_id={AD_GROUP_ID}&ad_id={AD_ID}&creative_id={CREATIVE_ID}&affiliate_id={AFFILIATE_ID}&loss_code=[ERRORCODE]                                                                                                                                                                                                                                                                                                                                                                 |
| /fc                            | pac.force.code-url                    | https://brainx-dsp-sg.tec-do.cn/fc?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&country={COUNTRY}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}&ad_id={AD_ID}&os={OS}&publisher_id={PUBLISH_ID}&id_key={ID_KEY}                                                                                                                                                                                                                                                                                                           |
| /collect/video/companion/count | pac.force.collect-video-companion-url | https://brainx-dsp-sg.tec-do.cn/collect/video/companion/count?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&ad_id={AD_ID}&creative_id={CREATIVE_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}&os={OS}&country={COUNTRY}&first_ssp={FIRST_SSP}                                                                                                                                                                                                                                                                          |
| /fj                            | pac.force.js-url                      | https://brainx-dsp-sg.tec-do.cn/fj?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&country={COUNTRY}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}&ad_id={AD_ID}&os={OS}&publisher_id={PUBLISH_ID}&id_key={ID_KEY}                                                                                                                                                                                                                                                                                                           |
| /collect/video/event           | pac.force.event.collect-video-url     | https://brainx-dsp-sg.tec-do.cn/collect/video/event?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&device_id={DEVICE_ID}&sign={SIGN}&campaign_id={CAMPAIGN_ID}&ad_id={AD_ID}                                                                                                                                                                                                                                                                                                                                        |

## 2 风控通知请求（域名需要映射通知服务）

| url        | key                                | value                                                                                                                                                                                                                                                |
| ---------- | ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| /c/feature | pac.no-force.collect-feature-url   | https://fly.adbase.top/c/feature?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                 |
| /c/code    | pac.no-force.collect-code-url      | https://fly.adbase.top/c/code?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                    |
| /c/error   | pac.no-force.collect-error-url     | https://fly.adbase.top/c/error?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                   |
| /ft/f      | pac.force.collect-feature-url-test | https://act.bidflex.top/ft/f?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                     |
| /ft/c      | pac.force.collect-code-url-test    | https://act.bidflex.top/ft/c?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                     |
| /ft/e      | pac.force.collect-error-url-test   | https://act.bidflex.top/ft/e?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}                                                                                     |
| /fj        | pac.force.js-url-test              | https://act.bidflex.top/fj?bid_id={BID_ID}&affiliate_id={AFFILIATE_ID}&country={COUNTRY}&ad_group_id={AD_GROUP_ID}&bundle={BUNDLE}&ip={IP}&schain={SCHAIN}&device_id={DEVICE_ID}&ad_id={AD_ID}&os={OS}&publisher_id={PUBLISH_ID}&id_key={ID_KEY}&t=1 |

## 3 其他通知请求
- /pb：？
- /pb/ae：需要在ae后台配置
- /sdk/pb：？